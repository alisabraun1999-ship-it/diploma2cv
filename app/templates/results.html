<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diploma2CV - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–∞—Ä—Å–∏–Ω–≥–∞</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        .stats {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            justify-content: center;
        }
        .stat {
            text-align: center;
            padding: 20px;
            background: #3498db;
            color: white;
            border-radius: 10px;
            min-width: 150px;
        }
        .stat-number {
            font-size: 24px;
            font-weight: bold;
        }
        .result-card {
            border: 1px solid #ddd;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            background: #fafafa;
        }
        .discipline {
            padding: 10px;
            margin: 5px 0;
            background: white;
            border-radius: 5px;
            border-left: 4px solid #3498db;
        }
        .competence {
            display: inline-block;
            padding: 3px 8px;
            margin: 2px;
            background: #e74c3c;
            color: white;
            border-radius: 3px;
            font-size: 12px;
        }
        .back-btn {
            display: inline-block;
            padding: 10px 20px;
            background: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .error {
            color: #e74c3c;
            padding: 20px;
            background: #fdedec;
            border-radius: 8px;
            text-align: center;
        }
        .success {
            color: #27ae60;
            padding: 20px;
            background: #e8f5e8;
            border-radius: 8px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="/" class="back-btn">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
        <h1>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–∞—Ä—Å–∏–Ω–≥–∞ —É—á–µ–±–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤</h1>

        {% if error %}
            <div class="error">
                <h3>‚ùå –û—à–∏–±–∫–∞</h3>
                <p>{{ error }}</p>
            </div>
        {% else %}
            <div class="stats">
                <div class="stat">
                    <div class="stat-number">{{ total_files }}</div>
                    <div>–§–∞–π–ª–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ</div>
                </div>
                <div class="stat">
                    <div class="stat-number">{{ total_disciplines }}</div>
                    <div>–î–∏—Å—Ü–∏–ø–ª–∏–Ω –Ω–∞–π–¥–µ–Ω–æ</div>
                </div>
                <div class="stat">
                    <div class="stat-number">{{ total_competences }}</div>
                    <div>–ö–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–π</div>
                </div>
            </div>

            {% for result in results %}
            <div class="result-card">
                <h3>üìÑ {{ result.filename }}</h3>
                <p>üìö –î–∏—Å—Ü–∏–ø–ª–∏–Ω: {{ result.disciplines_count }} | üéØ –ö–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–π: {{ result.competences_count }}</p>
                
                <h4>–î–∏—Å—Ü–∏–ø–ª–∏–Ω—ã:</h4>
                {% for disc in result.disciplines %}
                <div class="discipline">
                    <strong>{{ disc.code }}</strong>: {{ disc.name }}
                    <br>
                    <small>–ó–∞—á—ë—Ç–Ω—ã–µ –µ–¥–∏–Ω–∏—Ü—ã: {{ disc.credits }}</small>
                    {% if disc.competences %}
                    <br>
                    <small>–ö–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏: 
                        {% for comp in disc.competences %}
                        <span class="competence">{{ comp }}</span>
                        {% endfor %}
                    </small>
                    {% endif %}
                </div>
                {% endfor %}
                
                {% if result.disciplines_count > 10 %}
                <p>... –∏ –µ—â–µ {{ result.disciplines_count - 10 }} –¥–∏—Å—Ü–∏–ø–ª–∏–Ω</p>
                {% endif %}
            </div>
            {% endfor %}
        {% endif %}
    </div>
</body>
</html>